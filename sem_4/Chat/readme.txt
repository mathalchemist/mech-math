Disclaimer:
This program may contain bugs.
At least, it doesn't work on my machine - write() return error. I don't quite understand why.
